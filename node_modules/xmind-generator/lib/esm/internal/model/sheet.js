import { uuid } from "../common.js";
import { Topic } from "./topic.js";
import { Relationship } from "./relationship.js";
export class Sheet {
  title;
  id;
  _rootTopic;
  _relationships;
  constructor(title, rootTopic) {
    this.id = uuid();
    this.title = title ?? "";
    this._rootTopic = rootTopic ?? null;
    this._relationships = [];
  }
  get rootTopic() {
    return this._rootTopic;
  }
  get relationships() {
    return this._relationships;
  }
  query(topicId) {
    return this._rootTopic?.query(topicId) ?? null;
  }
  addRootTopic(title) {
    if (this._rootTopic) {
      throw new Error("Duplicated root topic creation");
    }
    this._rootTopic = new Topic(title);
    return this._rootTopic;
  }
  removeRootTopic() {
    this._rootTopic = null;
  }
  addRelationship(title, from, to) {
    const relationship = new Relationship(title, from, to);
    this._relationships.push(relationship);
    return relationship;
  }
}
